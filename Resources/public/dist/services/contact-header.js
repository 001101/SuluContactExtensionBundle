define(["app-config"],function(a){"use strict";var b=function(b,c){var d,e,f,g,h,i=0,j=a.getSection("sulu-contact-extension");if(!j||j.length>0||!j.hasOwnProperty("contactTypes"))return!1;h=j.contactTypes,b&&b.hasOwnProperty("id")&&b.hasOwnProperty("type")?(d=b.type,e="id"):c?(d=c,e="name"):(d=0,e="id");for(f in h)if(g=h[f],g[e]===d){i=g;break}return i},c=function(a,b){var c;return this.sandbox.util.each(a,function(a,d){return d.name===b?(c={title:this.sandbox.translate(d.translation+".conversion"),callback:function(){this.sandbox.emit("sulu.contacts.contact.convert",d)}.bind(this)},!1):void 0}.bind(this)),c},d=function(a){a.convertableTo&&Object.keys(a.convertableTo).length||this.sandbox.emit("sulu.header.toolbar.item.hide","settings")};return{setHeader:function(a){var c=b.call(this,{id:a.type,type:a.type});d.call(this,c)},getItemsForConvertOperation:function(d){var e,f=[],g=a.getSection("sulu-contact-extension").contactTypes;return e=b.call(this,{id:d.type,type:d.type}),this.sandbox.util.each(e.convertableTo,function(a,b){if(b){var d=c.call(this,g,a);f.push(d)}}.bind(this)),f},getContactType:function(a,c){return b.call(this,a,c)},getContactTypeIdByTypeName:function(a){return b.call(this,null,a).id},getContactTypeNameById:function(a){return this.getContactTypeById(a).name},getContactTypeById:function(a){return b.call(this,{id:a,type:a})}}});