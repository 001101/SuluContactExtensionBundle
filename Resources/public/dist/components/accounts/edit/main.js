define(["config","sulucontact/components/accounts/edit/main","services/sulucontactextension/account-header","services/sulucontactextension/account-router","services/sulucontactextension/account-manager","services/sulucontact/contact-router"],function(a,b,c,d,e,f){"use strict";var g,h=function(){},i=function(){},j=function(a){this.sandbox.emit("sulu.header.toolbar.item.loading","settings"),e.convertAccount(this.data.id,a).then(function(a){this.data=a,this.sandbox.emit("sulu.header.toolbar.item.enable","settings",!0),c.setHeader.call(this,this.data),this.sandbox.emit("sulu.header.toolbar.items.set","settings",c.getItemsForConvertOperation.call(this,this.data))}.bind(this))};return h.prototype=b,h.prototype.constructor=h,g=new h,i.prototype=new h,i.prototype.constructor=i,i.prototype.header=function(){var b=g.header.call(this);if(this.data.id){b.toolbar.buttons.settings={options:{dropdownItems:c.getItemsForConvertOperation.call(this,this.data)}};var d=a.get("sulu-contact-extension").displayAccountActiveToggle;if(d){var e=this.data.isActive?"toggler-on":"toggler";b.toolbar.buttons.isActive={parent:e,options:{title:"contacts.is-active",hidden:!0}}}}return b},i.prototype.loadComponentData=function(){var a=$.Deferred();return g.loadComponentData.call(this).then(function(b){this.options.accountType&&(b.type=c.getAccountTypeIdByTypeName(this.options.accountType)),a.resolve(b)}.bind(this)),a},i.prototype.initialize=function(){g.initialize.call(this),c.setHeader.call(this,this.data),this.sandbox.dom.off("#sidebar"),this.sandbox.dom.on("#sidebar","click",function(a){var b=this.sandbox.dom.data(a.currentTarget,"id");f.toEdit(b)}.bind(this),"#main-contact")},i.prototype.toList=function(){var a=c.getAccountType(this.data);d.toList(a.name)},i.prototype.bindCustomEvents=function(){g.bindCustomEvents.call(this),this.sandbox.on("sulu.contacts.account.convert",j.bind(this))},new i});